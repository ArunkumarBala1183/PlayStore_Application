<!-- Alignment Div for fixed navbars -->
<div class="md:px-3 pt-12 md:pl-48 lg:pl-72 lg:pt-[4rem] ">
    <!-- Main Div -->
    <div class="mt-2 shadow-2xl p-3 mx-4 md:mx-[5rem] lg:mx-[10rem] flex flex-col">
        <!-- Logo, App Name, Category, Download -->
        <div class="flex justify-between p-2">
            <!-- Logo -->
            <div class="flex items-center">
                <img class="rounded-md md:rounded-2xl bg-gray-100 h-[5rem] shadow-2xl w-[5rem] md:h-[6rem] md:w-[6rem]"
                    [src]="'data:image/jpg;base64,'+ (appDetail[0]?.logo)" alt="Instagram Logo">
            </div>
            <!-- App Name and Category -->
            <div class="flex flex-col pl-2 py-3 md:pl-2 md:py-10 ">
                <div class="">
                    <h1 class="instagram h-4 lg:font-medium md:text-3xl">
                        {{appDetail[0]?.name}}
                    </h1>
                </div>
                <div>
                    <span class="font-medium text-blue-800">
                        {{appDetail[0]?.categoryName}}
                    </span>
                </div>
            </div>
            <!-- Download Button -->
            <div class="py-7 px-2 md:py-14 md:px-3 lg:py-12 lg:px-10">
                <button *ngIf="!this.alreadyDownloaded"
                    class="w-24 md:w-24 lg:w-60 rounded-lg md:rounded-full bg-blue-500 text-white md:p-2 lg:p-3 hover:bg-blue-700"
                    type="submit" (click)="Downloadfile()">
                    Download
                </button>
                <button *ngIf="this.alreadyDownloaded" disabled
                    class="w-24 md:w-24 lg:w-60 rounded-lg md:rounded-full bg-blue-500 text-white md:p-2 lg:p-3 hover:bg-blue-700"
                    type="submit" (click)="Downloadfile()">
                    Already Installed
                </button>
            </div>
        </div>
        <!-- Rating and downloads -->
        <div class="mx-[4rem] lg:mx-[10 rem] flex justify-center">
            <!-- Ratings -->
            <div class="flex flex-col p-2 border-r">
                <div class="pl-2">
                    <!-- inorder to print star and rating value side-by-side -->
                    <div class="flex">
                        {{appDetail[0]?.rating | number : '1.1-1' }}
                        <svg xmlns="http://www.w3.org/2000/svg" fill="fill" viewBox="0 0 24 24" stroke-width="1.3"
                            stroke="currentColor" class="w-4 h-4 ml-[0.12rem] mt-[0.09rem]">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
                        </svg>
                    </div>
                </div>
                <div class="p-1">
                    Ratings
                </div>
            </div>
            <!-- Downloads -->
            <div class="pl-4">
                <div class="">
                    <div class="pt-2 px-5" *ngIf=" appDetail[0] && appDetail[0].downloads > 1000">
                        <span class="">
                            {{appDetail[0].downloads | abbreviateNumber}}+
                        </span>
                    </div>
                    <div class="pt-[0.5rem] px-8" *ngIf=" appDetail[0] && appDetail[0].downloads < 1000">
                        <span class="text-gray-400">
                            {{appDetail[0].downloads | abbreviateNumber}}
                        </span>
                    </div>
                    <div class="p-1">
                        Downloads
                    </div>
                </div>
            </div>
        </div>
        <!-- Preview -->
        <div class="mt-5 pt-3 pl-3 border-t">
            <h3>
                Screenshots
            </h3>
        </div>
        <!-- screenshots -->
        <div *ngIf="appDetail" class="flex" >
        <div *ngFor="let images of appDetail[0]?.appImages" class="space-x-2 px-3">
            <div class="flex flex-row border">
                <img class="h-[13rem] w-[13rem] rounded-lg " [src]="'data:image/jpg;base64,' +images"
                    alt="screenshots">
            </div>
            
            <!-- <div class="border w-1/3">
                <img class="h-[13rem] w-[13rem]" src="../../../assets/Images/instagram-ios-app-screenshot-1f60425b.jpg"
                    alt="">
            </div>
            <div class="border w-1/3">
                <img class="h-[13rem] w-[13rem]"
                    src="../../../assets/Images/instagrams-home-screen-redesign-will-force-you-to-use-reels-whether-you-like-it-or-not-1605248767768104505958.webp"
                    alt="">
            </div> -->
        </div>
        </div>
        <!-- Description -->
        <div class="mt-5 pt-3 pl-3 border-t">
            <div class="">
                <h3>
                    Description
                </h3>
            </div>
            <div class="px-2">
                <p>
                    {{appDetail[0]?.description}}
                </p>
            </div>
        </div>
        <!-- review -->
        <div class="p-2 pt-3 border-t">
            <div class="pl-1">
                <h3>
                    Reviews
                </h3>
            </div>
            <!-- username -->
            <!-- <div class="h-8 pl-3">
                <h3>
                    {{appReview[0]?.username}}
                </h3>
            </div> -->
            <!-- reviews -->
            <!-- <div class="pl-3" *ngIf="appReview[0]?.commands">
                <div *ngFor="let review of appReview[0]?.commands | keyvalue">
                <p>
                    {{appReview[0]?.username}}
                    {{review.value[0]}}
                </p>
            </div>
            </div> -->
            <div class="pl-3" *ngIf="appReview">
                <div *ngFor="let review of displayedReviews; let i = index" class="flex flex-col p-2 border-b">
                    <div class="font-medium text-[1rem]">
                        {{review.username[i]}}
                    </div>
                    <div class="p-2">
                        {{review.commands[i]}}
                    </div>
                </div>
                <button *ngIf="appReview.length > 3 && !showAllReviews" (click)="showMoreReviews()">More Reviews...</button>
            </div>
            <!-- Add a Review -->
            <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()" action="">
                <div class="">
                    <!-- input -->
                    <div class="p-2 flex flex-col items-center">
                        <div>
                            <textarea formControlName="commands" class="p-2 rounded-xl w-48 md:w-64 focus:outline-none hover:bg-gray-200" type="text" placeholder="Add your Review"
                                rows="4" cols="4"></textarea>
                        </div>

                        <div  *ngIf="reviewForm.get('commands')?.hasError('required') && reviewForm.get('commands')?.touched" class="text-red-500 flex justify-center">
                            <span>Please review the App</span>
                        </div>
                    </div>
                    <div class="flex justify-center md:mx-20 lg:mx-36 border rounded-md hover:bg-gray-200">
                        <div class="flex items-center">
                            <span>Rate this App</span>
                        </div>
                        <div class="flex p-2">
                        <ng-container *ngFor="let star of stars ; let i = index">
                            <svg (click)="rating(i+1)" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path [ngClass]="i < currentRating ? 'text-yellow-500' : ''" *ngIf="i < 5"
                                    stroke-linecap="round" stroke-linejoin="round"
                                    d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
                            </svg>
                        </ng-container>
                        </div>
                    </div>
                    <!-- button -->
                    <div class="p-2 flex justify-center">
                        <button class="rounded-md p-1 bg-blue-500 hover:bg-blue-700 text-white"
                            type="submit">Submit</button>
                    </div>
                </div>
            </form>
        </div>
        <!-- Publications -->
        <div class="p-2 pt-3 border-t">
            <!-- Heading -->
            <div class="pl-1">
                <h3>
                    Publications
                </h3>
            </div>
            <div class="flex justify-center">
                <div class="border-r hover:shadow-2xl hover:cursor-context-menu p-6 flex flex-col justify-center space-y-2">
                    <span>
                        Publisher Name
                    </span>
                    <span class="flex justify-center">
                         {{appDetail[0]?.publisherName}}
                    </span>
                </div>
                <div class="p-6 hover:shadow-2xl hover:cursor-pointer space-y-2 flex flex-col">
                    <span>
                        Publish Date
                    </span>
                    <span class="flex justify-center">
                        {{appDetail[0]?.publishedDate}}
                    </span>
                </div>
            </div>
        </div>
    </div>
    </div>